<script lang="ts">
  import "./navBar.css";
  import { onMount } from "svelte";

  /*manages the dropdown menu */
  let isDropdownOpen = false;

  const handleDropdownClick = (event: MouseEvent) => {
    event.stopPropagation();
    isDropdownOpen = !isDropdownOpen;
    console.log("isDropdownOpen:", isDropdownOpen);
  };

  const closeDropdown = (event: MouseEvent) => {
    const target = event.target as HTMLElement;

    if (!target.closest(".nav-container")) {
      isDropdownOpen = false;
    }
  };

  onMount(() => {
    document.addEventListener("click", closeDropdown);

    return () => {
      document.removeEventListener("click", closeDropdown);
    };
  });
</script>

<header class="headerForNav">
  <div class="header-content">
    <a href="#top" aria-label="Home">
      <div class="logo">
        <svg
          width="179"
          height="60"
          viewBox="0 0 179 60"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M19.5651 18.4942C19.5651 21.0973 18.8822 23.3777 17.5162 25.3353C15.9846 27.5636 13.9873 28.6778 11.5244 28.6778H3.48363V10.341H1.96241L1 8.56039H3.48363V3H12.611C13.5838 3.04165 14.4116 3.41651 15.0946 4.12457C15.7776 4.83264 16.1191 5.67607 16.1191 6.65486C16.1191 7.59201 15.7569 8.45627 15.0325 9.24763C14.9498 9.33094 14.8876 9.39341 14.8462 9.43506C16.2122 10.1223 17.3609 11.4239 18.2923 13.3399C19.1409 15.11 19.5651 16.8281 19.5651 18.4942ZM14.2875 6.65486C14.2875 5.55111 13.7286 4.93677 12.611 4.81181V4.84306H9.32019V8.56039H10.8724C10.7276 8.56039 11.2553 8.53957 12.4557 8.49792C13.6769 8.45627 14.2875 7.84192 14.2875 6.65486ZM17.7335 18.4942C17.7335 16.6407 17.2574 14.933 16.3054 13.371C15.2498 11.6217 13.8735 10.6117 12.1764 10.341H9.32019V26.7722C9.65135 26.8347 10.0032 26.8555 10.3757 26.8347C10.6241 26.8347 11.0069 26.8347 11.5244 26.8347C13.4285 26.7722 14.9808 25.8247 16.1812 23.9921C17.216 22.3676 17.7335 20.535 17.7335 18.4942ZM32.6663 28.6778H22.1109V3.03124H27.9474V26.8972H31.7349L32.6663 28.6778ZM48.2822 22.149C48.2822 23.9608 47.6509 25.5019 46.3884 26.7722C45.1259 28.0426 43.5943 28.6778 41.7937 28.6778C39.9931 28.6778 38.4615 28.0426 37.1989 26.7722C35.9365 25.5019 35.3051 23.9608 35.3051 22.149V3H41.1727V26.8035C41.2969 26.8243 41.5039 26.8347 41.7937 26.8347C43.0976 26.8347 44.1945 26.387 45.0845 25.4915C45.9952 24.5752 46.4505 23.461 46.4505 22.149L46.5126 3H48.2822V22.149ZM62.4078 28.6778H51.8524V10.3097H50.7969L49.8344 8.52915H51.8524V3H61.4454L62.4078 4.74934H57.6889V8.52915H61.4765L62.4078 10.3097H57.6889V26.8972H61.4454L62.4078 28.6778ZM84.8229 10.341H80.104V28.6778H74.2671V10.341H73.0564L72.1252 8.56039H74.2671V3H83.891L84.8229 4.78057H80.104V8.56039H83.891L84.8229 10.341ZM101.276 22.149C101.276 23.9608 100.645 25.5019 99.3829 26.7722C98.1206 28.0426 96.5887 28.6778 94.7879 28.6778C92.9877 28.6778 91.4558 28.0426 90.1935 26.7722C88.9311 25.5019 88.3 23.9608 88.3 22.149V3H94.1673V26.8035C94.2912 26.8243 94.4985 26.8347 94.7879 26.8347C96.092 26.8347 97.1887 26.387 98.0789 25.4915C98.9895 24.5752 99.4452 23.461 99.4452 22.149L99.5068 3H101.276V22.149ZM116.831 28.6778H115.061V12.4339L110.559 5.99886V28.6778H104.722V3H111.118L115.061 8.68535V3H116.831V28.6778ZM135.923 10.341H133.657V29.5837H131.887V27.6156C130.791 28.3238 129.632 28.6778 128.41 28.6778C125.616 28.6778 123.391 27.1783 121.736 24.1795C120.369 21.6804 119.686 18.9107 119.686 15.8701C119.686 13.975 119.966 12.132 120.525 10.341H119.624L118.631 8.56039H121.239C121.984 6.97766 122.936 5.70731 124.095 4.74934C125.419 3.62476 126.858 3.06248 128.41 3.06248C129.797 3.06248 131.101 3.51023 132.322 4.40571V6.99849C131.142 5.72813 129.838 5.09296 128.41 5.09296C127.707 5.09296 126.817 5.41575 125.741 6.06134V8.56039H134.961L135.923 10.341ZM131.887 25.2104V10.341H125.741V25.6789C126.817 26.387 127.707 26.741 128.41 26.741C129.632 26.741 130.791 26.2308 131.887 25.2104ZM151.633 22.149C151.633 23.9608 151.001 25.5019 149.738 26.7722C148.476 28.0426 146.944 28.6778 145.144 28.6778C143.343 28.6778 141.811 28.0426 140.549 26.7722C139.287 25.5019 138.655 23.9608 138.655 22.149V3H144.523V26.8035C144.647 26.8243 144.854 26.8347 145.144 26.8347C146.447 26.8347 147.545 26.387 148.434 25.4915C149.345 24.5752 149.801 23.461 149.801 22.149L149.863 3H151.633V22.149ZM166.969 23.6172C166.783 25.3249 165.416 27.0117 162.871 28.6778H155.482V28.6465C159.083 26.5848 160.905 24.2524 160.946 21.6492C160.966 20.358 160.366 18.869 159.145 17.1821C158.111 15.8493 157.086 14.5061 156.072 13.1524C155.12 11.7155 154.633 10.1744 154.613 8.52915C154.592 6.88395 155.72 5.04089 157.997 3H165.354V3.03124C164.009 3.5727 162.943 4.32242 162.157 5.28038C161.266 6.38414 160.884 7.61283 161.008 8.96649C161.111 9.98692 161.474 11.1011 162.094 12.309C162.467 13.017 163.119 14.0583 164.051 15.4328C164.982 16.8073 165.624 17.8381 165.975 18.5254C166.658 19.9207 167 21.3264 167 22.7426C167 23.034 166.989 23.3257 166.969 23.6172ZM16.2471 46.317C16.2471 48.5504 15.678 50.4403 14.5397 51.9867C13.4014 53.533 11.9974 54.3347 10.3278 54.392L9.47411 54.4206V58H4.09549V38.2132C4.79746 38.2132 5.84093 38.2132 7.2259 38.2132C8.59193 38.2323 9.62591 38.2419 10.3278 38.2419C12.1682 38.2419 13.6575 39.1582 14.7958 40.9908C15.7634 42.5753 16.2471 44.3506 16.2471 46.317ZM14.5681 46.317C14.5681 44.8279 14.2361 43.463 13.5721 42.2221C12.7563 40.695 11.6749 39.9313 10.3278 39.9313H9.47411V52.7312L10.3278 52.7025C11.5041 52.6644 12.5002 52.0344 13.316 50.8126C14.1508 49.5909 14.5681 48.0923 14.5681 46.317ZM33.2653 50.5835L33.2083 58H31.5862V50.3831C31.5862 48.8941 31.055 47.6246 29.9926 46.5747C28.9301 45.5056 27.6495 44.9424 26.1507 44.8852L25.2115 43.1957H25.923C26.0179 43.1957 26.1601 43.1957 26.3499 43.1957C26.5396 43.2148 26.6819 43.2243 26.7768 43.2243C27.2321 43.2243 27.621 43.0621 27.9435 42.7376C28.285 42.3939 28.4558 41.9931 28.4558 41.5349C28.4558 41.0958 28.304 40.714 28.0004 40.3895C27.6969 40.0459 27.3269 39.8741 26.8906 39.8741H23.9024V58H18.5523V38.1846H26.8906C27.7823 38.2419 28.5411 38.595 29.1673 39.2441C29.8123 39.8741 30.1348 40.6376 30.1348 41.5349C30.1348 42.4512 29.8028 43.253 29.1388 43.9402C30.3909 44.5702 31.3964 45.4865 32.1554 46.6892C32.9142 47.8918 33.2842 49.1899 33.2653 50.5835ZM51.4216 48.1209C51.4216 50.6217 50.7291 52.8457 49.3442 54.7929C47.8074 56.9309 45.8343 58 43.4248 58C41.0154 58 39.0423 56.9309 37.5055 54.7929C36.1206 52.8648 35.4281 50.6408 35.4281 48.1209C35.4281 45.6202 36.1206 43.3961 37.5055 41.449C39.0423 39.3109 41.0154 38.2419 43.4248 38.2419C45.8154 38.2419 47.7884 39.3205 49.3442 41.4776C50.7291 43.4057 51.4216 45.6202 51.4216 48.1209ZM49.771 48.1209C49.771 46.0783 49.2303 44.2552 48.1489 42.6517C46.9347 40.8381 45.36 39.9313 43.4248 39.9313C42.5901 39.9313 41.7743 40.1413 40.9774 40.5613V55.6805C41.7743 56.1005 42.5901 56.3105 43.4248 56.3105C45.36 56.3105 46.9347 55.4038 48.1489 53.5902C49.2303 51.9867 49.771 50.1636 49.771 48.1209ZM67.956 48.1209C67.956 50.6217 67.2633 52.8457 65.8784 54.7929C64.3417 56.9309 62.3686 58 59.9591 58H54.239V38.2132L59.9591 38.2419C62.3686 38.2609 64.3417 39.3395 65.8784 41.4776C67.2633 43.4057 67.956 45.6202 67.956 48.1209ZM66.2768 48.1209C66.2768 46.0974 65.7361 44.2839 64.6547 42.6803C63.4405 40.8476 61.8753 39.9313 59.9591 39.9313H59.5892V56.3105H59.9591C61.8943 56.3105 63.4689 55.4038 64.6832 53.5902C65.7456 51.9867 66.2768 50.1636 66.2768 48.1209ZM82.3558 52.0153C82.3558 53.6952 81.777 55.1174 80.6199 56.2819C79.4814 57.4273 78.0773 58 76.4077 58C74.7572 58 73.3538 57.4178 72.1961 56.2533C71.0391 55.0888 70.4602 53.6761 70.4602 52.0153L70.4887 38.2132H75.8388V56.2819C75.9719 56.301 76.1613 56.3105 76.4077 56.3105C77.6031 56.3105 78.6184 55.9001 79.4529 55.0792C80.2881 54.2393 80.7054 53.2179 80.7054 52.0153L80.7338 38.2132H82.3558V52.0153ZM95.3614 57.3987C94.5455 57.7805 93.6633 57.9713 92.7149 57.9713C90.2862 57.9523 88.3132 56.8832 86.7952 54.7642C85.4104 52.8362 84.7176 50.6122 84.7176 48.0923C84.7176 45.5915 85.4104 43.3675 86.7952 41.4203C88.3318 39.2823 90.3054 38.2132 92.7149 38.2132C93.6255 38.2132 94.5077 38.4042 95.3614 38.7859V40.6472C94.5455 40.1508 93.6633 39.9027 92.7149 39.9027C91.8797 39.9027 91.0638 40.1127 90.267 40.5327V55.652C91.0638 56.0719 91.8797 56.2819 92.7149 56.2819C93.6633 56.2819 94.5455 56.0337 95.3614 55.5374V57.3987ZM109.22 39.8454H106.005V58H100.655V39.8454H98.3206L97.4384 38.2132H108.366L109.22 39.8454ZM120.262 58H112.009L111.127 56.3678H113.005V39.8741H112.009L111.127 38.2419H119.38L120.262 39.8741H118.355V56.3678H119.38L120.262 58ZM138.475 48.1209C138.475 50.6217 137.783 52.8457 136.398 54.7929C134.861 56.9309 132.888 58 130.479 58C128.069 58 126.096 56.9309 124.56 54.7929C123.174 52.8648 122.482 50.6408 122.482 48.1209C122.482 45.6202 123.174 43.3961 124.56 41.449C126.096 39.3109 128.069 38.2419 130.479 38.2419C132.869 38.2419 134.843 39.3205 136.398 41.4776C137.783 43.4057 138.475 45.6202 138.475 48.1209ZM136.825 48.1209C136.825 46.0783 136.284 44.2552 135.203 42.6517C133.989 40.8381 132.414 39.9313 130.479 39.9313C129.644 39.9313 128.828 40.1413 128.031 40.5613V55.6805C128.828 56.1005 129.644 56.3105 130.479 56.3105C132.414 56.3105 133.989 55.4038 135.203 53.5902C136.284 51.9867 136.825 50.1636 136.825 48.1209ZM152.249 58H150.627V46.8324L146.501 40.9335V58H141.15V38.2132H147.013L150.627 43.3961V38.2132H152.249V58ZM165.995 54.1056C165.843 55.4228 164.6 56.721 162.267 58H155.494V57.9713C158.776 56.406 160.445 54.602 160.502 52.5593C160.521 51.5858 159.952 50.4213 158.795 49.0659C157.865 48.0541 156.936 47.0328 156.006 46.0019C155.152 44.8947 154.706 43.7111 154.669 42.4512C154.649 41.1912 155.693 39.7786 157.799 38.2132H164.544C163.367 38.595 162.418 39.1391 161.698 39.8454C160.805 40.7045 160.427 41.6876 160.559 42.7948C160.654 43.8066 161.27 45.0761 162.409 46.6033C164.154 48.9132 165.046 50.1063 165.084 50.1826C165.71 51.2517 166.023 52.3303 166.023 53.4184C166.023 53.6475 166.014 53.8766 165.995 54.1056Z"
            fill="white"
          />
        </svg>
      </div>
    </a>

    <!-- Desktop view dropdown -->
    <nav class="navbar">
      <a class="navText" href="#about">About</a>
      <a class="navText" href="#reference">Reference</a>
      <a class="navText" href="#team">Team</a>
    </nav>

    <!-- Mobile view dropdown -->
    <div class="mobile-nav-button">
      <button class="buttonNavDropdown {isDropdownOpen ? 'change' : ''}" on:click={handleDropdownClick} aria-label="Toggle navigation menu">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </button>

    </div>
  </div>
  {#if isDropdownOpen}
    <nav class="dropdown-content">
      <a href="#about" class="navText" on:click={handleDropdownClick}>About</a>
      <a href="#reference" class="navText" on:click={handleDropdownClick}>Reference</a>
      <a href="#team" class="navText" on:click={handleDropdownClick}>Team</a>
    </nav>
  {/if}
</header>
